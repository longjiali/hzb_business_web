(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fdbf855"],{"07c0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState,expression:"loadingState"}],staticClass:"carInsurance"},[a("div",{staticClass:"carInsurance-item"},[t._m(0),t._v(" "),a("div",{staticClass:"carInsurance-item-content"},[a("div",{staticClass:"content-list-button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addLabel}},[t._v("新增标签")])],1),t._v(" "),a("div",{staticClass:"content-label-list"},t._l(t.listData,(function(e,n){return a("div",{key:n,staticClass:"label-list-item",class:{"label-list-item_a":e.choose},on:{click:function(a){return t.changeLabel(e)}}},[t._v("\n          "+t._s(e.labelName)+"\n          "),a("i",{staticClass:"el-icon-close",on:{click:function(a){return a.stopPropagation(),t.deleteLabel(e)}}})])})),0),t._v(" "),a("div",{staticClass:"item-content-list"},[t._l(t.getListItem(),(function(e,n){return a("div",{key:n,staticClass:"content-list-tab"},[a("div",{staticClass:"list-tab-name"},[t._v("附件名称:")]),t._v(" "),a("div",{staticClass:"list-tab-input"},[a("el-input",{attrs:{placeholder:"请输入附件名称"},model:{value:e.attachmentName,callback:function(a){t.$set(e,"attachmentName",a)},expression:"item.attachmentName"}})],1),t._v(" "),a("div",{staticClass:"list-tab-input"},[a("el-input",{attrs:{placeholder:"请输入附件备注、描述"},model:{value:e.attachmentRemark,callback:function(a){t.$set(e,"attachmentRemark",a)},expression:"item.attachmentRemark"}})],1),t._v(" "),a("div",{staticClass:"list-tab-check"},[a("el-checkbox",{attrs:{"true-label":"Y"},model:{value:e.required,callback:function(a){t.$set(e,"required",a)},expression:"item.required"}},[t._v("必填")])],1),t._v(" "),t.getListItem().length>1?a("div",{staticClass:"list-tab-reduce",on:{click:function(a){return t.deleteEnclosure(e)}}}):t._e(),t._v(" "),t.getListItem().length===n+1?a("div",{staticClass:"list-tab-add",on:{click:t.addEnclosure}}):t._e()])})),t._v(" "),a("div",{staticClass:"item-content-button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.preservationLabelData()}}},[t._v("保存")])],1)],2)])]),t._v(" "),a("el-dialog",{attrs:{title:"新增标签",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"page-dialog-tab"},[a("el-input",{attrs:{placeholder:"请输入标签名称"},model:{value:t.addLabelName,callback:function(e){t.addLabelName=e},expression:"addLabelName"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.setAttConfSaveLabel}},[t._v("确 定")])],1)],1)])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carInsurance-item-head"},[a("div",{staticClass:"item-head-left"},[a("div",{staticClass:"head-left-icon"}),t._v("\n        报案客户自助上传附件配置\n      ")])])}],s=(a("7514"),a("5530")),c=a("161b"),l={data:function(){return{listData:[],dialogVisible:!1,loadingState:!1,addLabelName:""}},created:function(){this.getAttConfPolicyConfig()},methods:{changeLabel:function(t){this.listData=this.listData.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{choose:e.labelName===t.labelName})}))},addLabel:function(){this.dialogVisible=!0},deleteLabel:function(t){var e=this,a=t;a.type="policy",this.loadingState=!0,c["c"](a).then((function(t){e.loadingState=!1,"Success"===t.msg&&(e.$message.success("删除标签成功"),e.getAttConfPolicyConfig())})).catch((function(){e.loadingState=!1}))},deleteEnclosure:function(t){var e=this,a=this.listData.find((function(t){return t.choose})),n={id:t.id,items:[{attachmentName:t.attachmentName,attachmentRemark:t.attachmentRemark,id:t.id,labelId:a.labelId,required:t.required}],type:"policy"};this.loadingState=!0,c["b"](n).then((function(t){e.loadingState=!1,"Success"===t.msg&&(e.$message.success("附件删除成功"),e.getAttConfPolicyConfig(a.labelId))})).catch((function(){e.loadingState=!1}))},addEnclosure:function(){var t=this,e=this.listData.find((function(t){return t.choose})),a={items:[{attachmentName:"",attachmentRemark:"",id:"",labelId:e.labelId,required:""}],type:"policy"};this.loadingState=!0,c["a"](a).then((function(a){t.loadingState=!1,"Success"===a.msg&&(t.$message.success("附件新增成功"),t.getAttConfPolicyConfig(e.labelId))})).catch((function(){t.loadingState=!1}))},preservationLabelData:function(){var t=this,e=this.listData.find((function(t){return t.choose})),a=e.items.find((function(t){return""===t.attachmentName}));if(a)this.$message.error("请填写附件名称、或删除多余附件");else{var n={items:e.items,type:"policy"};this.loadingState=!0,c["a"](n).then((function(a){t.loadingState=!1,"Success"===a.msg&&(t.$message.success("数据保存成功"),t.getAttConfPolicyConfig(e.labelId))})).catch((function(){t.loadingState=!1}))}},getListItem:function(){var t=this.listData.find((function(t){return t.choose}));return t&&t.items&&t.items.length||t.items.push({attachmentName:"",attachmentRemark:"",id:"",required:""}),t.items},getAttConfPolicyConfig:function(t){var e=this;this.loadingState=!0,c["e"]().then((function(a){e.loadingState=!1,e.listData=a.data,e.listData=e.listData.map((function(e,a){return Object(s["a"])(Object(s["a"])({},e),{},{choose:t?e.labelId===t:0===a})}))})).catch((function(){e.loadingState=!1}))},setAttConfSaveLabel:function(){var t=this,e={labelId:"",labelName:this.addLabelName,type:"policy"};this.loadingState=!0,c["f"](e).then((function(e){t.loadingState=!1,"Success"===e.msg&&(t.$message.success("新增标签成功"),t.dialogVisible=!1,t.getAttConfPolicyConfig())})).catch((function(){t.loadingState=!1}))}}},o=l,r=(a("9779"),a("2877")),u=Object(r["a"])(o,n,i,!1,null,"126c1585",null);e["default"]=u.exports},"161b":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return r}));var n=a("b775");function i(t){return Object(n["a"])({url:"/attConf/carConfig/".concat(t),method:"get"})}function s(){return Object(n["a"])({url:"/attConf/policyConfig",method:"get"})}function c(t){return Object(n["a"])({url:"/attConf/save/label",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/attConf/delete/label",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/attConf/delete/item",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/attConf/upsert/item",method:"post",data:t})}},7514:function(t,e,a){"use strict";var n=a("5ca1"),i=a("0a49")(5),s="find",c=!0;s in[]&&Array(1)[s]((function(){c=!1})),n(n.P+n.F*c,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},9779:function(t,e,a){"use strict";var n=a("fef2"),i=a.n(n);i.a},fef2:function(t,e,a){}}]);