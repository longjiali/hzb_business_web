(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93f31cf0"],{"180d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"page"},[a("div",{staticClass:"baseTitle"},[a("div",{staticClass:"baseTitle-left"},[a("span",[e._v("产品基本信息")])]),e._v(" "),a("div",{staticClass:"divider"})]),e._v(" "),a("FormList",{ref:"productForm",attrs:{formList:e.formList,baseForm:e.product}})],1),e._v(" "),e._l(e.tableList,(function(t,l){return a("div",{key:l,staticClass:"page"},[a("div",{staticClass:"baseTitle"},[a("div",{staticClass:"baseTitle-left"},[a("span",[e._v(e._s(t.title))])]),e._v(" "),a("div",{staticClass:"divider"}),e._v(" "),a("div",{staticClass:"title-right"},[a("i",{staticClass:"el-icon-edit-outline"}),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showAddTableData(t)}}},[e._v("\n          新增\n        ")])],1)]),e._v(" "),a("el-table",{attrs:{data:t.tableData,border:""}},[e._l(t.tableColumn,(function(e){return a("el-table-column",{key:e.value,attrs:{prop:e.value,label:e.label,width:"sort"===e.value?"50px":"auto",align:"center"}})})),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteTabelData(l,r.sort)}}},[e._v(" 删除 ")])]}}],null,!0)})],2)],1)})),e._v(" "),a("div",{staticClass:"page"},[a("div",{staticClass:"baseTitle"},[a("div",{staticClass:"baseTitle-left"},[a("span",[e._v("自费药")])]),e._v(" "),a("div",{staticClass:"divider"})]),e._v(" "),a("FormList",{ref:"drugForm",attrs:{formList:e.zfyFormList,baseForm:e.drug}})],1),e._v(" "),a("div",{staticClass:"button"},[a("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("提交")])],1),e._v(" "),a("el-dialog",{attrs:{title:e.tempTableAdd.title,visible:e.tempTableAdd.show,width:"30%"},on:{"update:visible":function(t){return e.$set(e.tempTableAdd,"show",t)}}},[a("FormList",{ref:"formList_tableOpt",attrs:{formList:e.tempTableAdd.formList,baseForm:e.tempTableAdd.form}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.tempTableAdd.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTableData()}}},[e._v("确 定")])],1)],1)],2)},r=[],o=(a("ac6a"),a("5df3"),a("20d6"),a("5530")),s=(a("7514"),a("85e6")),n=a("22c9"),i=a("2b43"),u=a("aa3a"),d={components:{FormList:n["default"]},data:function(){var e=[{value:"productCode",label:"产品编号",span:7},{value:"productName",label:"产品销售名称",span:7,offset:1},{value:"insuranceCompany",label:"保险公司",span:7,offset:1},{value:"productDesc",label:"产品介绍",type:"textarea",span:24},{value:"productTypeId",label:"产品分类",type:"select",span:7,options:[],optionSet:{label:"dictLabel",value:"id"}},{value:"enabled",label:"是否上架",type:"radio",default:"y",span:7,offset:1,options:s["sexOptions"]},{value:"feeRatio",label:"经纪费比例",type:"number",span:7,offset:1},{value:"productImgPath",label:"产品图片",type:"upload",default:"",span:24}],t={};e.map((function(e){t[e.value]=e.default||""}));var a=[{title:"赔偿项目类别",tableColumn:[{value:"sort",label:"序号",hidden:!1,required:!1},{value:"indemnityCode",label:"类别编号",required:!1},{value:"indemnityName",label:"类别名称"}],key:"indemnity",tableData:[]},{title:"职业类别",tableColumn:[{value:"sort",label:"序号",hidden:!1,required:!1},{value:"occupationCode",label:"类别编号",required:!1},{value:"occupationName",label:"类别名称"}],key:"occupation",tableData:[]},{title:"附加条款",tableColumn:[{value:"sort",label:"序号",hidden:!1,required:!1},{value:"clauseContent",label:"条款内容"}],clauseClass:24,key:"additionalTerms",tableData:[]},{title:"免赔额",tableColumn:[{value:"sort",label:"序号",hidden:!1,required:!1},{value:"clauseContent",label:"条款内容"}],clauseClass:25,key:"deductible",tableData:[]},{title:"特别约定",tableColumn:[{value:"sort",label:"序号",hidden:!1,required:!1},{value:"clauseContent",label:"条款内容"}],clauseClass:26,key:"specialAppointment",tableData:[]},{title:"人员系数",tableColumn:[{value:"minimumNum",label:"最低人数"},{value:"highestNum",label:"最高人数"},{value:"factor",label:"系数"}],key:"personnelFactor",tableData:[]}],l=this.$route.query.productId;return{productId:l,formList:e,product:Object.assign({},t,{productId:l}),tableList:a,tempTableAdd:{title:"",show:!1,formList:[],form:{},ref:""},zfyFormList:[{value:"drugName",label:"名称",span:7},{value:"factor",label:"调整系数",type:"number",span:7,offset:1},{value:"drugContent",label:"内容",type:"textarea",span:24}],drug:{drugName:"",factor:"",drugContent:""},loading:!1}},created:function(){var e=this;this.loading=!0,Object(u["b"])({pageNum:1,pageSize:9999,enName:"product_type"}).then((function(t){var a=t.data;e.formList.map((function(e){"productTypeId"===e.value&&(e.options=a.list)})),e.productId?Object(i["a"])(e.productId).then((function(t){var a=t.data,l=a.product,r=a.drug;e.product=l,e.drug=r,e.tableList.map((function(e){e.tableData=a[e.key]})),e.loading=!1})):e.loading=!1}))},methods:{showAddTableData:function(e){var t={};e.tableColumn.map((function(e){t[e.value]=""})),e.clauseClass&&(t.clauseClass=e.clauseClass),this.tempTableAdd={title:"新增".concat(e.title),show:!0,formList:e.tableColumn,form:t}},addTableData:function(){var e=this;this.$refs.formList_tableOpt.validate().then((function(){var t=e.tableList.find((function(t){return t.tableColumn===e.tempTableAdd.formList}));t.tableData.push(Object(o["a"])(Object(o["a"])({},e.tempTableAdd.form),{},{sort:t.tableData.length+1})),e.tempTableAdd={title:"",show:!1,formList:[],form:{}},e.$message({message:"新增成功",type:"success"})}))},deleteTabelData:function(e,t){this.tableList[e].tableData.splice(this.tableList[e].tableData.findIndex((function(e){return e.index===t})),1),this.$message({message:"删除成功",type:"success"})},save:function(){var e=this,t=this.$refs,a=t.drugForm,l=t.productForm;Promise.all([a.validate(),l.validate()]).then((function(){var t=Object.assign({},{product:e.product},{drug:e.drug});e.tableList.map((function(e){t[e.key]=e.tableData})),Object(i["e"])(Object(o["a"])(Object(o["a"])({},t),{},{operating:e.productId?"UPDATE":"NEW"})).then((function(t){e.$message({message:"".concat(e.productId?"编辑":"新增","成功"),type:"success"}),e.$router.go(-1)}))}))}}},c=d,b=(a("959d"),a("2877")),p=Object(b["a"])(c,l,r,!1,null,"5a9e306b",null);t["default"]=p.exports},"22c9":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.baseForm,rules:e.rules}},[a("el-row",e._l(e.formList,(function(t){return a("el-col",{directives:[{name:"show",rawName:"v-show",value:"boolean"!==typeof t.hidden||t.hidden,expression:"typeof item.hidden === 'boolean' ? item.hidden : true"}],key:t.value,attrs:{span:t.span||24,offset:t.offset||0}},[a("el-form-item",{attrs:{label:t.label+"：",prop:t.value}},["radio"===t.type?[a("el-radio-group",{model:{value:e.baseForm[t.value],callback:function(a){e.$set(e.baseForm,t.value,a)},expression:"baseForm[item.value]"}},e._l(t.options,(function(t,l){return a("el-radio",{key:l,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)]:"textarea"===t.type?[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入"+t.label},model:{value:e.baseForm[t.value],callback:function(a){e.$set(e.baseForm,t.value,a)},expression:"baseForm[item.value]"}})]:"upload"===t.type?[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/business/file/upload",name:"file","show-file-list":!1,"on-success":function(a,l){e.handleAvatarSuccess(l,t.value)},headers:{token:e.getToken()||null},"before-upload":e.beforeAvatarUpload}},[e.baseForm[t.value]?a("img",{staticClass:"avatar",attrs:{src:e.baseForm[t.value]}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]:"select"===t.type?[a("el-select",{attrs:{placeholder:"请选择"+t.label},model:{value:e.baseForm[t.value],callback:function(a){e.$set(e.baseForm,t.value,a)},expression:"baseForm[item.value]"}},e._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:t.optionSet?e[t.optionSet.label]:e.label,value:t.optionSet?e[t.optionSet.value]:e.label}})})),1)]:"number"===t.type?[a("el-input-number",{attrs:{placeholder:"请输入"+t.label,step:.01,"controls-position":"right"},model:{value:e.baseForm[t.value],callback:function(a){e.$set(e.baseForm,t.value,a)},expression:"baseForm[item.value]"}})]:[a("el-input",{attrs:{placeholder:"请输入"+t.label},model:{value:e.baseForm[t.value],callback:function(a){e.$set(e.baseForm,t.value,a)},expression:"baseForm[item.value]"}})]],2)],1)})),1)],1)},r=[],o=(a("7f7f"),a("5f87")),s={model:{prop:"baseForm",event:"baseFormUpdata"},props:{formList:{type:Array,default:function(){return[]}},baseForm:{type:Object,default:function(){return{}}}},data:function(){return{getToken:o["a"],rules:{},fileList:[]}},watch:{baseForm:{handler:function(){this.$emit("baseFormUpdata",this.baseForm)},deep:!0},formList:{handler:function(e){var t=this;e.map((function(e){t.$set(t.rules,e.value,[{required:"boolean"!==typeof e.required||e.required,message:"请输入".concat(e.label),trigger:"change"}])}))},deep:!0,immediate:!0}},methods:{validate:function(){var e=this;return new Promise((function(t){e.$refs.form.validate().then((function(e){e&&t()}))}))},handleAvatarSuccess:function(e,t){this.baseForm[t]=e.response.data},beforeAvatarUpload:function(e){var t=e.name,a=["png","jpg","jpeg","bmp","gif"],l=t.lastIndexOf("."),r=t.substr(l+1);return-1!==a.indexOf(r.toLowerCase())||(this.$message({type:"error",message:"请上传图片文件"}),!1)}}},n=s,i=(a("bca4"),a("2877")),u=Object(i["a"])(n,l,r,!1,null,"47a944af",null);t["default"]=u.exports},"2b43":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"f",(function(){return i})),a.d(t,"b",(function(){return u}));var l=a("b775"),r=function(e){return Object(l["a"])({url:"/product/query",method:"post",data:e})},o=function(e){return Object(l["a"])({url:" /product/save",method:"post",data:e})},s=function(e){return Object(l["a"])({url:"/product/detail/"+e,method:"get"})},n=function(e){return Object(l["a"])({url:"/programme/query",method:"post",data:e})},i=function(e){return Object(l["a"])({url:"/programme/insert",method:"post",data:e})},u=function(e){return Object(l["a"])({url:"/programme/detail/"+e,method:"get"})}},"466c":function(e,t,a){},7514:function(e,t,a){"use strict";var l=a("5ca1"),r=a("0a49")(5),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),l(l.P+l.F*s,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},"85e6":function(e,t,a){"use strict";a.r(t),a.d(t,"sexOptions",(function(){return l}));var l=[{value:"Y",label:"是"},{value:"N",label:"否"}]},"959d":function(e,t,a){"use strict";var l=a("466c"),r=a.n(l);r.a},bca4:function(e,t,a){"use strict";var l=a("f81f"),r=a.n(l);r.a},f81f:function(e,t,a){}}]);