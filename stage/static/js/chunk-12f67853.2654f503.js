(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12f67853"],{"161b":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return r}));var n=a("b775");function i(t){return Object(n["a"])({url:"/attConf/carConfig/".concat(t),method:"get"})}function c(){return Object(n["a"])({url:"/attConf/policyConfig",method:"get"})}function s(t){return Object(n["a"])({url:"/attConf/save/label",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/attConf/delete/label",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/attConf/delete/item",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/attConf/upsert/item",method:"post",data:t})}},2435:function(t,e,a){"use strict";var n=a("51c8"),i=a.n(n);i.a},"51c8":function(t,e,a){},7514:function(t,e,a){"use strict";var n=a("5ca1"),i=a("0a49")(5),c="find",s=!0;c in[]&&Array(1)[c]((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(c)},"9c5c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState,expression:"loadingState"}],staticClass:"carInsurance"},[t._l(t.listData,(function(e,n){return a("div",{key:n,staticClass:"carInsurance-item"},[a("div",{staticClass:"carInsurance-item-head"},[a("div",{staticClass:"item-head-left"},[a("div",{staticClass:"head-left-icon"}),t._v("\n        配置车险"+t._s("Subject"===e.type?"标的":"三者")+"资料收集附件\n      ")])]),t._v(" "),a("div",{staticClass:"carInsurance-item-content"},[a("div",{staticClass:"content-list-button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.addLabel(e.type)}}},[t._v("新增标签")])],1),t._v(" "),e.config.length?a("div",{staticClass:"content-label-list"},t._l(e.config,(function(n,i){return a("div",{key:i,staticClass:"label-list-item",class:{"label-list-item_a":n.choose},on:{click:function(a){return t.changeLabel(e,n)}}},[t._v("\n          "+t._s(n.labelName)+"\n          "),a("i",{staticClass:"el-icon-close",on:{click:function(a){return a.stopPropagation(),t.deleteLabel(e,n)}}})])})),0):t._e(),t._v(" "),e.config.length?a("div",{staticClass:"item-content-list"},[t._l(t.getConfigItem(e.type),(function(n,i){return a("div",{key:i,staticClass:"content-list-tab"},[a("div",{staticClass:"list-tab-name"},[t._v("附件名称:")]),t._v(" "),a("div",{staticClass:"list-tab-input"},[a("el-input",{attrs:{placeholder:"请输入附件名称"},model:{value:n.attachmentName,callback:function(e){t.$set(n,"attachmentName",e)},expression:"Titem.attachmentName"}})],1),t._v(" "),a("div",{staticClass:"list-tab-input"},[a("el-input",{attrs:{placeholder:"请输入附件备注、描述"},model:{value:n.attachmentRemark,callback:function(e){t.$set(n,"attachmentRemark",e)},expression:"Titem.attachmentRemark"}})],1),t._v(" "),a("div",{staticClass:"list-tab-check"},[a("el-checkbox",{attrs:{"true-label":"Y"},model:{value:n.required,callback:function(e){t.$set(n,"required",e)},expression:"Titem.required"}},[t._v("必填")])],1),t._v(" "),t.getConfigItem(e.type).length>1?a("div",{staticClass:"list-tab-reduce",on:{click:function(a){return t.deleteEnclosure(e,n)}}}):t._e(),t._v(" "),t.getConfigItem(e.type).length===i+1?a("div",{staticClass:"list-tab-add",on:{click:function(a){return t.preservationLabelData(e,n,"add")}}}):t._e()])})),t._v(" "),a("div",{staticClass:"item-content-button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.preservationLabelData(e,"","preservationLabel")}}},[t._v("保存")])],1)],2):t._e()])])})),t._v(" "),a("el-dialog",{attrs:{title:"新增标签",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"page-dialog-tab"},[a("el-input",{attrs:{placeholder:"请输入标签名称"},model:{value:t.addLabelName,callback:function(e){t.addLabelName=e},expression:"addLabelName"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.setAttConfSaveLabel}},[t._v("确 定")])],1)],1)])],2)},i=[],c=(a("7514"),a("5530")),s=a("161b"),o={data:function(){return{listData:[],dialogVisible:!1,loadingState:!1,addLabelType:"",addLabelName:""}},created:function(){this.getAttConfCarConfig()},methods:{addLabel:function(t){this.dialogVisible=!0,this.addLabelType=t},changeLabel:function(t,e){this.listData=this.listData.map((function(a){return a.type===t.type&&(a.config=a.config.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{choose:t.labelId===e.labelId})}))),a}))},deleteLabel:function(t,e){var a=this,n=e;n.type="car",n.labelType=t.type,this.loadingState=!0,s["c"](n).then((function(t){a.loadingState=!1,"Success"===t.msg&&(a.$message.success("删除标签成功"),a.getAttConfCarConfig())})).catch((function(){a.loadingState=!1}))},setAttConfSaveLabel:function(){var t=this,e={labelId:"",labelName:this.addLabelName,labelType:this.addLabelType,type:"car"};s["f"](e).then((function(e){"Success"===e.msg&&(t.$message.success("新增标签成功"),t.dialogVisible=!1,t.getAttConfCarConfig())})).catch((function(){t.loadingState=!1}))},deleteEnclosure:function(t,e){var a=this,n=t.config.find((function(t){return t.choose})),i={id:e.id,items:[{attachmentName:e.attachmentName,attachmentRemark:e.attachmentRemark,id:e.id,labelId:n.labelId,required:e.required||""}],type:"car"};this.loadingState=!0,s["b"](i).then((function(e){a.loadingState=!1,"Success"===e.msg&&(a.$message.success("附件删除成功"),a.getAttConfCarConfig(t.type,n.labelId))})).catch((function(){a.loadingState=!1}))},preservationLabelData:function(t,e,a){var n=this,i=t.config.find((function(t){return t.choose})),c={};if("add"===a&&(c={id:"add"===a?"":e.id,items:[{attachmentName:"",attachmentRemark:"",id:"",labelId:i.labelId,required:""}],type:"car"}),"preservationLabel"===a){var o=i.items.find((function(t){return""===t.attachmentName}));if(o)return void this.$message.error("请填写附件名称、或删除多余附件");c={items:i.items,type:"car"}}this.loadingState=!0,s["a"](c).then((function(e){n.loadingState=!1,"Success"===e.msg&&(n.$message.success("".concat("add"===a?"新增附件成功":"附件修改成功")),n.getAttConfCarConfig(t.type,i.labelId))})).catch((function(){n.loadingState=!1}))},getConfigItem:function(t){var e=this.listData.find((function(e){return e.type===t}))&&this.listData.find((function(e){return e.type===t})).config,a=e&&e.find((function(t){return t.choose}));return a&&a.items&&a.items.length||a.items.push({attachmentName:"",attachmentRemark:"",id:"",required:""}),a.items},getAttConfCarConfig:function(t,e){var a=this;this.loadingState=!0,s["d"]("all").then((function(n){a.listData=n.data,a.loadingState=!1,a.listData=a.listData.map((function(a){return a.type===t&&e?a.config.length>0&&(a.config=a.config.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{choose:t.labelId===e})}))):a.config.length>0&&(a.config=a.config.map((function(t,e){return Object(c["a"])(Object(c["a"])({},t),{},{choose:0===e})}))),a}))})).catch((function(){a.loadingState=!1}))}}},l=o,r=(a("2435"),a("2877")),u=Object(r["a"])(l,n,i,!1,null,"c98bf3ba",null);e["default"]=u.exports}}]);